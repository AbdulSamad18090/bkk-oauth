<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>User Account</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>

<body class="min-h-screen bg-gray-100 text-gray-800 p-8">
  <div class="max-w-2xl mx-auto h-full bg-white rounded-xl shadow-md border p-6">
    <!-- Logo -->
    <div class="w-full flex justify-center mb-6">
      <img src="/assets/images/logo.png" alt="logo" class="h-20 w-auto" />
    </div>

    <h1 class="text-2xl font-bold mb-4">Your Account</h1>

    <div class="space-y-4">
      <!-- User Info Card -->
      <div id="logged-in-account"
        class="flex items-center justify-between bg-green-50 border border-green-500 shadow-md rounded-full p-2 cursor-pointer">
        <div class="flex items-center gap-2">
          <img src="/assets/images/concent-screen-img.png" alt="pp"
            class="object-cover w-10 h-10 rounded-full border border-green-500 shadow" />
          <p class="text-lg font-medium text-gray-900">@{{user.username}}</p>
        </div>
        <div class="flex items-center justify-center">
          <a id="logout-btn"
            class="inline-flex items-center gap-2 bg-red-100 text-red-600 hover:bg-red-600 hover:text-white transition-all px-4 py-2 rounded-full font-medium text-sm shadow-sm">
            <i data-lucide="log-out" class="w-4 h-4"></i>
            Logout
          </a>

        </div>
      </div>
      {{!-- Divider --}}
      <div class="flex items-center justify-between">
        <div class="w-full h-[1px] bg-green-500"></div>
        <span class="text-center text-xs px-1 w-20 rounded-full bg-green-50 border-[1.5px] border-green-500">Or</span>
        <div class="w-full h-[1px] bg-green-500"></div>
      </div>
      {{!-- Login Another Acccount Button --}}
      <button id="login-another-account-btn"
        class="w-full p-2 bg-green-500 text-white rounded-lg shadow-md hover:bg-green-600 transition-all">
        <div class="flex items-center justify-center gap-2">
          <i data-lucide="log-in" class="w-4 h-4"></i>
          <p>Signin to Another Account</p>
        </div>
        <p class="text-xs text-center pt-1 font-bold flex items-center justify-center gap-2">
          <i data-lucide="circle-alert" class="w-4 h-4"></i>
          This will log you out from all of your accounts
        </p>
      </button>
    </div>
  </div>

  <script>
    lucide.createIcons();
    const accountCard = document.getElementById("logged-in-account");
    const loginBtn = document.getElementById("login-another-account-btn");
    const authServer = "http://localhost:4000";
    const clientId = "test";
    const redirectUri = "http://localhost:5500/client/index.html";

    accountCard.addEventListener("click", () => {
      const authUrl = `${authServer}/authorize?response_type=code&client_id=${clientId}&redirect_uri=${encodeURIComponent(
        redirectUri
      )}`;
      window.location.href = authUrl;
    });

    document.getElementById("logout-btn").addEventListener("click", (e) => {
      e.preventDefault();
      window.location.href = `${authServer}/logout?redirect_uri=${encodeURIComponent("/accounts")}`;
    });


    loginBtn.addEventListener("click", () => {
      window.location.href = `${authServer}/logout?redirect_uri=${encodeURIComponent(
        `/authorize?response_type=code&client_id=${clientId}&redirect_uri=${redirectUri}`
      )}`;
    });
  </script>
</body>

</html>
